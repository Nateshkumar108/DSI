<!DOCTYPE html>
<html>

<head>
    <title>
        DSI Dashboard
    </title>

    <link rel="icon" href="../img/favicon-96x96.png" type="image/png">
    <link rel="stylesheet" href="js/utility/jquery-ui/jquery-ui.css">
    <link rel="stylesheet" href="css/font-awesome/css/font-awesome.min.css">
    <link rel="stylesheet" href="css/style.css">
    <link href="https://fonts.googleapis.com/css?family=Open+Sans" rel="stylesheet">
    

    <style type="text/css">
        .input-calendar {
            display: block;
            width: 100%;
            max-width: 360px;
            margin: 0 auto;
            height: 3.2em;
            line-height: 3.2em;
            font: inherit;
            padding: 0 1.2em;
            border: 1px solid #d8d8d8;
            box-shadow: 0 4px 12px rgba(0, 0, 0, .25);
            -o-box-shadow: 0 4px 12px rgba(0, 0, 0, .25);
            -moz-box-shadow: 0 4px 12px rgba(0, 0, 0, .25);
            -webkit-box-shadow: 0 4px 12px rgba(0, 0, 0, .25);
        }

        .btn-calendar {
            display: block;
            width: 100%;
            max-width: 360px;
            height: 3.2em;
            line-height: 3.2em;
            background-color: #52555a;
            margin: 0 auto;
            font-weight: 600;
            color: #ffffff !important;
            text-decoration: none !important;
            box-shadow: 0 4px 12px rgba(0, 0, 0, .25);
            -o-box-shadow: 0 4px 12px rgba(0, 0, 0, .25);
            -moz-box-shadow: 0 4px 12px rgba(0, 0, 0, .25);
            -webkit-box-shadow: 0 4px 12px rgba(0, 0, 0, .25);
        }

        .btn-calendar:hover {
            background-color: #5a6268;
        }
    </style>
</head>

<body>
    <header>
        <a href="http://www.digitalspacesinc.com/">
            <img src="img/logo.png" alt="" style="width: 179px;">
        </a>
    </header>
    <div class="dashboard">
        <div class="tabs">
            <div class="workspace">
                <h3>WORKSPACE</h3>
                <ul class="workspaceButton">
                    <li>
                        <button class="peopleCounter active-tab" id="ppc" onclick="myPeopleCounter()">PEOPLE COUNTER</button>
                    </li>
                    <li>
                        <button class="ageCount" id="agc" onclick="myAgeCounter()">DEMOGRAPHICS</button>
                    </li>
                    <li>
                        <button class="trakMap" id="trkMap" onclick="myTrackMap()">TRACK MAP</button>
                    </li>
                </ul>
            </div>
            <!-- <div class="rooms">
                  <h3>Rooms</h3>
                  <ul class="roomsButton">
                    <li><button class="occupancyReport">Occupancy Report</button></li>
                    <li><button class="dwellReport">Dwell Report</button></li>
                  </ul>
                </div> -->
        </div>
        <div class="graphs">
            <div class="highcharts" id="hiChart">
                <ul class="chartButton">
                    <li>
                        <button name="in" id="in" class="">IN</button>
                    </li>
                    <li>
                        <button name="out" id="out" class="">OUT</button>
                    </li>
                    <li>
                        <button name="in" id="inout" class="active">IN/OUT</button>
                    </li>
                </ul>



                <div id="container" style="min-width: 310px; height: 400px; margin: 0 auto"></div>
            </div>
            <div class="ageCounter" id="agCount">
                <div id="demogra" style="min-width: 310px; height: 400px; margin: 0 auto"></div>

                <!-- <h1>AGE COUNTER</h1> -->
            </div>
            <div class="trackMaps" id="trackMap">

                <h1>TRACK MAP</h1>
                <div id="imgalign"></div>
            </div>
        </div>
        <div class="event">
            <div class="selectZone">
                <h3>SELECT ZONE</h3>
                <ul class="labdown">
                   <ul>
                        <li>FACILITY:</li>
                        <li>
                                <select disabled>
                                    <option value="volvo">REGUS</option>
    
                                </select>
                            </li>
                   </ul>
                   <ul>
                       <li>FLOOR:</li>
                       <li>
                            <select disabled>
                            <option value="volvo">7TH FLOOR </option>

                        </select>
                       </li>
                   </ul>
                   <ul>
                        <li>ROOM:</li>
                        <li>
                                <select id="dd">
                                    <option value="volvo">SELECT ROOM</option>
                                    <option id="r704" style="display:none;">704</option>
                                    <option id="r705" style="display:none;">705</option>
                                    <option id="r706">706</option>
    
                                    <option id="rdo">DEEPAK'S OFFICE</option>
                                </select>
                            </li>
                   </ul>
                   <ul>
                        <li>SENSOR:</li>
                        <li>
                                <select>
                                    <option value="volvo">SELECT SENSOR</option>
                                    <option id="s1" style="display:none;">001EAA</option>
                                    <option id="s2">001EEC</option>
                                    <option id="s3" style="display:none;">001D5F</option>
                                    <option id="s4" style="display:none;">001438</option>
                                    <option id="s5">001E56</option>
    
                                    <!-- <option value="saab">001EEC</option>
                                        <option value="opel">001D5F</option>
                                        <option value="audi">001438</option> -->
                                </select>
                            </li>
                   </ul> 
                </ul>
                <!-- <ul class="dropdowns">
                    <ul class="labels">
                        <li>FACILITY:</li>
                        <li>FLOOR:</li>
                        <li>ROOM:</li>
                        <li>SENSOR:</li>
                    </ul>
                    <ul class="slectDropdown">
                        <li>
                            <select disabled>
                                <option value="volvo">REGUS</option>

                            </select>
                        </li>
                        <li>
                            <select disabled>
                                <option value="volvo">7TH FLOOR </option>

                            </select>
                        </li>
                        <li>
                            <select id="dd">
                                <option value="volvo">SELECT ROOM</option>
                                <option id="r704" style="display:none;">704</option>
                                <option id="r705" style="display:none;">705</option>
                                <option id="r706">706</option>

                                <option id="rdo">DEEPAK'S OFFICE</option>
                            </select>
                        </li>
                        <li>
                            <select>
                                <option value="volvo">SELECT ROOM</option>
                                <option id="s1" style="display:none;">001EAA</option>
                                <option id="s2">001EEC</option>
                                <option id="s3" style="display:none;">001D5F</option>
                                <option id="s4" style="display:none;">001438</option>
                                <option id="s5">001E56</option>

                                <!-- <option value="saab">001EEC</option>
                                    <option value="opel">001D5F</option>
                                    <option value="audi">001438</option> -->
                            <!-- </select>
                        </li>
                    </ul>
                </ul> -->
            </div>

            <div class="calendars">
                <span id="txt-main-cal" class="active-calendar hand-pointer">Calendar</span>
                <span id="txt-custom-cal" class="hand-pointer">Custom</span>
            </div>

            <div id="main-calendar">
                <div class="calender">
                    <div id="datepicker"></div>
                </div>
            </div>
            <div id="custom-calendar">
                <label for="from" class="lbl-calendar">From: </label>
                <input type="text" id="from" name="from">
                <div class="clearfix"></div>
                <label for="to" class="lbl-calendar">To: </label>
                <input type="text" id="to" name="to">

                <div class="clearfix"></div>
                <div class="search-button">
                    <button class="button" onclick="customCalSearch()">Search</button>
                </div>
                
            </div>
            
            <!-- <div class="time">
                <div id="slider"></div>

            </div> -->
        </div>
    </div>
    <script type="text/javascript">
        var today = new Date();
        var day = today.getDate();
        var month = today.getMonth() + 1;
        var year = today.getFullYear();
        var fromDate = year + "-" + month + "-" + day;
        var tomorrowDate = new Date(new Date().getTime() + (24 * 60 * 60 * 1000));
        var tomorrow = new Date(new Date().getTime() + (24 * 60 * 60 * 1000));
        var day = tomorrow.getDate();
        var month = tomorrow.getMonth() + 1;
        var year = tomorrow.getFullYear();
        var toDate = year + "-" + month + "-" + day;
        var calDate = fromDate;
        var calNextDate = toDate;
    </script>
    <script type="text/javascript" src="js/utility/jquery/jquery-3.2.1.min.js"></script>
    <script type="text/javascript" src="js/utility/jquery-ui/jquery-ui.min.js"></script>
    <script type="text/javascript" src="calender.js"></script>
    <script type="text/javascript" src="js/utility/highcharts/highcharts.js"></script>
    <script type="text/javascript" src="js/utility/highcharts/highcharts-more.js"></script>
    <script type="text/javascript" src="highchart.js"></script>
    <script type="text/javascript" src="demographic.js"></script>
    <script type="text/javascript" src="demoApiCal.js"></script>
    <script type="text/javascript" src="buttons.js"></script>
    <script type="text/javascript">
        $(function () {
            $('#custom-calendar').hide();

            $("#datepicker").datepicker({
                onSelect: function (date) {
                    var tomorrow = new Date(new Date(date).getTime() + (24 * 60 * 60 * 1000));
                    var day = tomorrow.getDate();
                    var month = tomorrow.getMonth() + 1;
                    var year = tomorrow.getFullYear();
                    var toDate = year + "-" + month + "-" + day;
                    calNextDate = toDate;

                    var today = new Date(new Date(date));
                    var day = today.getDate();
                    var month = today.getMonth() + 1;
                    var year = today.getFullYear();
                    var fromDate = year + "-" + month + "-" + day;
                    calDate = fromDate;
                    let value = null;

                    if ($('#agc').hasClass('active-tab')) {
                        demoApi(fromDate, toDate);
                    } else if ($('#ppc').hasClass('active-tab')) {
                        //Check which tab is currently active
                        if ($('#in').hasClass('active')) {
                            value = 'in';
                        } else if ($('#out').hasClass('active')) {
                            value = 'out';
                        } else {
                            value = 'in-out';
                        }
                        apiCal(fromDate, toDate, value);
                    }

                }
            });

            // $("#slider").slider();

            $('#in').click(function () {
                if (!$(this).hasClass('active')) {
                    $(this).addClass('active');
                    $('#out').removeClass('active');
                    $('#inout').removeClass('active');
                }
            });

            $('#out').click(function () {
                if (!$(this).hasClass('active')) {
                    $(this).addClass('active');
                    $('#in').removeClass('active');
                    $('#inout').removeClass('active');

                }
            });

            $('#inout').click(function () {
                if (!$(this).hasClass('active')) {
                    $(this).addClass('active');
                    $('#in').removeClass('active');
                    $('#out').removeClass('active');
                }
            });


            $('#txt-main-cal').click(function(){
                $('#main-calendar').show();
                $('#custom-calendar').hide();
                $('#txt-main-cal').addClass('active-calendar');
                $('#txt-custom-cal').removeClass('active-calendar');
            });

            $('#txt-custom-cal').click(function(){
                $('#main-calendar').hide();
                $('#custom-calendar').show();
                $('#txt-main-cal').removeClass('active-calendar');
                $('#txt-custom-cal').addClass('active-calendar');
            });


            
            var fromCustomCal = $("#from").datepicker({
                showOn: "both",
                buttonText: '<i class="fa fa-calendar" aria-hidden="true"></i>'
            })
            .on("change", function () {
                toCustomCal.datepicker("option", "minDate", getCustomDate(this));
            });
            fromCustomCal.datepicker("setDate", new Date());

            var toCustomCal = $("#to").datepicker({
                showOn: "both",
                buttonText: '<i class="fa fa-calendar" aria-hidden="true"></i>'
            })
            .on("change", function () {
                fromCustomCal.datepicker("option", "maxDate", getCustomDate(this));
            });
            toCustomCal.datepicker("setDate", new Date());

            function getCustomDate(element) {
                var date;
                var dateFormat = "mm/dd/yy";
                try {
                    date = $.datepicker.parseDate(dateFormat, element.value);
                } catch (error) {
                    date = null;
                }

                return date;
            }  
        });

        function customCalSearch(){
            let fromDate = $("#from" ).datepicker( "getDate" );
            let toDate = $("#to").datepicker( "getDate" );

            if(fromDate.getDate() == toDate.getDate()){
                toDate = new Date(new Date(toDate).getTime() + (24 * 60 * 60 * 1000));
            }

            fromDate = fromDate.getFullYear() + "-" + (fromDate.getMonth() + 1) + "-" + fromDate.getDate();
            calDate = fromDate;

            toDate = toDate.getFullYear() + "-" + (toDate.getMonth() + 1) + "-" + toDate.getDate();
            calNextDate = toDate;

            let value = null;
            //Check which tab is currently active
            if ($('#in').hasClass('active')) {
                value = 'in';
            } else if ($('#out').hasClass('active')) {
                value = 'out';
            } else {
                value = 'in-out';
            }
            apiCal(fromDate, toDate, value);
            }

    </script>
</body>

</html>